<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loan Application - URJC Bank</title>
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous" />
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" rel="stylesheet"
          crossorigin="anonymous" />
    <!-- Custom styles -->
    <link href="../css/style.css" rel="stylesheet" />
    <!-- Custom background style -->
    <style>
        body {
            background-image: url("../assets/img/fondouni.jpg");
            background-size: cover;
            background-position: center;
        }
    </style>
</head>

{{>../static/profile_header}}

<main>
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-lg-7">
                <div class="card shadow-lg border-0 rounded-lg mt-5">
                    <div class="card-header bg-danger">
                        <h3 class="text-center font-weight-light my-4 text-white">
                            Loan Application
                        </h3>
                    </div>
                    <div class="card-body">
                        <form id="loanForm">
                            <div class="form-floating mb-3">
                                <input class="form-control" id="inputAmount" type="number"
                                       placeholder="Enter loan amount" required />
                                <label for="inputAmount">Loan Amount to Finance</label>
                            </div>
                            <div class="form-floating mb-3">
                                <select class="form-select" id="inputExpenseType" required>
                                    <option value="">Select expense type</option>
                                    <option value="1">Housing</option>
                                    <option value="2">Education</option>
                                    <option value="3">Medical</option>
                                    <option value="4">Other</option>
                                </select>
                                <label for="inputExpenseType">Expense Type</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input class="form-control" id="inputInstallments" type="number"
                                       placeholder="Enter number of installments" required />
                                <label for="inputInstallments">Number of Installments</label>
                            </div>
                            <div class="mt-4 mb-0">
                                <div class="d-grid">
                                    <button class="btn btn-danger btn-block" type="submit">
                                        Calculate
                                    </button>
                                </div>
                            </div>
                            <div id="result" class="mt-3"></div>
                        </form>
                    </div>
                    <div class="card-footer text-center py-3">
                        <div class="row mt-5">
                            <div class="col-lg-4">
                                <h2>COMFORT</h2>
                                <p>Because you choose the monthly payment, selecting amount and term.</p>
                                <img src="../assets/img/comfort.jpg" alt="Placeholder Image" class="img-fluid">
                            </div>
                            <div class="col-lg-4">
                                <h2>FLEXIBILITY</h2>
                                <p>Because you can return it in up to 7 years.</p>
                                <img src="../assets/img/flexibility.jpg" alt="Placeholder Image" class="img-fluid">
                            </div>
                            <div class="col-lg-4">
                                <h2>A MAXIMUM AMOUNT OF</h2>
                                <p>100.000â‚¬.</p>
                                <img src="../assets/img/confianza.jpg" alt="Placeholder Image" class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    {{>../static/short_footer}}
    <!-- Bootstrap core JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            crossorigin="anonymous"></script>

    <script>
        const INTEREST_RATE = 1; // 1% interest rate per month

        document
            .getElementById("loanForm")
            .addEventListener("submit", function (event) {
                event.preventDefault();
                var amount = parseFloat(document.getElementById("inputAmount").value);
                var expenseType = document.getElementById("inputExpenseType").value;
                var installments = parseInt(
                    document.getElementById("inputInstallments").value
                );
                if (amount > 0 && expenseType !== "" && installments > 0) {
                    var monthlyInterest = (amount * INTEREST_RATE) / 100;
                    var totalAmount = amount + monthlyInterest * installments;
                    var monthlyPayment = totalAmount / installments;
                    document.getElementById("result").innerHTML =
                        "<p class='alert alert-success'>Total Interest: $" +
                        (monthlyInterest * installments).toFixed(2) +
                        "<br>Monthly Payment: $" +
                        monthlyPayment.toFixed(2) +
                        "</p>";
                } else {
                    document.getElementById("result").innerHTML =
                        "<p class='alert alert-danger'>Please enter valid loan amount, select expense type, and enter number of installments.</p>";
                }
            });
    </script>
</main>

</html>